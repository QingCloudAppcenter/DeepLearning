{
    "name": {{cluster.name}},
    "description": {{cluster.description}},
    "vxnet": {{cluster.vxnet}},
    "nodes": [{
        "container": {
            "type": "kvm",
            "zone": "pek3",
            "image": "img-ta17ch6r"
        },
        "count": {{cluster.dl_node.count}},
        "cpu": {{cluster.dl_node.cpu}},
        "cpu_model": "Broadwell",
        "gpu": {{cluster.dl_node.gpu}},
        "memory": {{cluster.dl_node.memory}},
        "instance_class": {{cluster.dl_node.instance_class}},
        "gpu_class": 2,
        "user_access": true,
        "volume": {
            "size": {{cluster.dl_node.volume_size}},
            "class": {{cluster.dl_node.volume_class}}
        },
        "services": {
            "init": {
                "post_start_service": true,
                "cmd": "chown ubuntu /data && chown -R ubuntu /home/ubuntu/.qingstor",
                "timeout": 3600
            }
        },
        "monitor": {
            "enable": true,
            "cmd": "/usr/bin/python /opt/dl/rocm-monitor.py",
            "items": {
                "GPUUtil_1": {
                    "unit": "%",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "MemoryUtil_1": {
                    "unit": "%",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "Temperature_1": {
                    "unit": "℃",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "MemoryTotal_1": {
                    "unit": "MB",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "MemoryUsed_1": {
                    "unit": "MB",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "MemoryFree_1": {
                    "unit": "MB",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "GPUUtil_2": {
                    "unit": "%",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "MemoryUtil_2": {
                    "unit": "%",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "Temperature_2": {
                    "unit": "℃",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "MemoryTotal_2": {
                    "unit": "MB",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "MemoryUsed_2": {
                    "unit": "MB",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "MemoryFree_2": {
                    "unit": "MB",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "GPUUtil_3": {
                    "unit": "%",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "MemoryUtil_3": {
                    "unit": "%",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "Temperature_3": {
                    "unit": "℃",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "MemoryTotal_3": {
                    "unit": "MB",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "MemoryUsed_3": {
                    "unit": "MB",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "MemoryFree_3": {
                    "unit": "MB",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "GPUUtil_4": {
                    "unit": "%",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "MemoryUtil_4": {
                    "unit": "%",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "Temperature_4": {
                    "unit": "℃",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "MemoryTotal_4": {
                    "unit": "MB",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "MemoryUsed_4": {
                    "unit": "MB",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "MemoryFree_4": {
                    "unit": "MB",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "GPUUtil_5": {
                    "unit": "%",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "MemoryUtil_5": {
                    "unit": "%",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "Temperature_5": {
                    "unit": "℃",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "MemoryTotal_5": {
                    "unit": "MB",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "MemoryUsed_5": {
                    "unit": "MB",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "MemoryFree_5": {
                    "unit": "MB",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "GPUUtil_6": {
                    "unit": "%",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "MemoryUtil_6": {
                    "unit": "%",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "Temperature_6": {
                    "unit": "℃",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "MemoryTotal_6": {
                    "unit": "MB",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "MemoryUsed_6": {
                    "unit": "MB",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "MemoryFree_6": {
                    "unit": "MB",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "GPUUtil_7": {
                    "unit": "%",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "MemoryUtil_7": {
                    "unit": "%",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "Temperature_7": {
                    "unit": "℃",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "MemoryTotal_7": {
                    "unit": "MB",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "MemoryUsed_7": {
                    "unit": "MB",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "MemoryFree_7": {
                    "unit": "MB",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "GPUUtil_8": {
                    "unit": "%",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "MemoryUtil_8": {
                    "unit": "%",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "Temperature_8": {
                    "unit": "℃",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "MemoryTotal_8": {
                    "unit": "MB",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "MemoryUsed_8": {
                    "unit": "MB",
                    "value_type": "int",
                    "statistics_type": "latest"
                },
                "MemoryFree_8": {
                    "unit": "MB",
                    "value_type": "int",
                    "statistics_type": "latest"
                }
            },
            "groups": {
                "GPU-1 utilization": ["GPUUtil_1", "MemoryUtil_1"],
                "GPU-1 memory utilization": ["MemoryTotal_1", "MemoryUsed_1"],
                "GPU-2 utilization": ["GPUUtil_2", "MemoryUtil_2"],
                "GPU-2 memory utilization": ["MemoryTotal_2", "MemoryUsed_2"],
                "GPU-3 utilization": ["GPUUtil_3", "MemoryUtil_3"],
                "GPU-3 memory utilization": ["MemoryTotal_3", "MemoryUsed_3"],
                "GPU-4 utilization": ["GPUUtil_4", "MemoryUtil_4"],
                "GPU-4 memory utilization": ["MemoryTotal_4", "MemoryUsed_4"],
                "GPU-5 utilization": ["GPUUtil_5", "MemoryUtil_5"],
                "GPU-5 memory utilization": ["MemoryTotal_5", "MemoryUsed_5"],
                "GPU-6 utilization": ["GPUUtil_6", "MemoryUtil_6"],
                "GPU-6 memory utilization": ["MemoryTotal_6", "MemoryUsed_6"],
                "GPU-7 utilization": ["GPUUtil_7", "MemoryUtil_7"],
                "GPU-7 memory utilization": ["MemoryTotal_7", "MemoryUsed_7"],
                "GPU-8 utilization": ["GPUUtil_8", "MemoryUtil_8"],
                "GPU-8 memory utilization": ["MemoryTotal_8", "MemoryUsed_8"]
            },
            "display": ["GPU-1 utilization", "GPU-1 memory utilization", "GPU-2 utilization", "GPU-2 memory utilization", "GPU-3 utilization", "GPU-3 memory utilization", "GPU-4 utilization", "GPU-4 memory utilization", "GPU-5 utilization", "GPU-5 memory utilization", "GPU-6 utilization", "GPU-6 memory utilization", "GPU-7 utilization", "GPU-7 memory utilization", "GPU-8 utilization", "GPU-8 memory utilization"]
        }
    }],
    "advanced_actions": ["change_vxnet", "scale_horizontal"],
    "env": {
            "QingStor": {{env.QingStor}},
            "access_key_id": {{env.access_key_id}}
    }
}
